# Comparing `tmp/monzo_utils-0.0.92-py3-none-any.whl.zip` & `tmp/monzo_utils-0.0.93-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,14 +1,14 @@
-Zip file size: 37908 bytes, number of entries: 40
+Zip file size: 38089 bytes, number of entries: 40
 -rw-r--r--  2.0 unx        0 b- defN 23-Nov-10 22:36 monzo_utils/lib/__init__.py
 -rw-r--r--  2.0 unx     1419 b- defN 24-Jan-25 21:32 monzo_utils/lib/config.py
 -rw-r--r--  2.0 unx     7941 b- defN 24-Jan-25 21:32 monzo_utils/lib/db.py
 -rw-r--r--  2.0 unx     1870 b- defN 23-Nov-12 13:34 monzo_utils/lib/log.py
 -rw-r--r--  2.0 unx     9373 b- defN 24-Apr-25 17:47 monzo_utils/lib/monzo_api.py
--rw-r--r--  2.0 unx    27325 b- defN 24-Apr-20 12:23 monzo_utils/lib/monzo_payments.py
+-rw-r--r--  2.0 unx    29025 b- defN 24-May-09 18:44 monzo_utils/lib/monzo_payments.py
 -rw-r--r--  2.0 unx    19466 b- defN 24-Apr-25 17:47 monzo_utils/lib/monzo_sync.py
 -rw-r--r--  2.0 unx      238 b- defN 23-Nov-10 20:55 monzo_utils/lib/singleton.py
 -rw-r--r--  2.0 unx      108 b- defN 24-Jan-25 21:32 monzo_utils/lib/transactions_seen.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Nov-12 20:00 monzo_utils/lib/db_driver/__init__.py
 -rw-r--r--  2.0 unx     1579 b- defN 23-Nov-12 20:51 monzo_utils/lib/db_driver/mysql.py
 -rw-r--r--  2.0 unx     1259 b- defN 23-Nov-12 20:39 monzo_utils/lib/db_driver/sqlite.py
 -rw-r--r--  2.0 unx        0 b- defN 23-Nov-10 22:36 monzo_utils/model/__init__.py
@@ -26,17 +26,17 @@
 -rw-r--r--  2.0 unx    16506 b- defN 24-Apr-20 12:23 monzo_utils/model/payment.py
 -rw-r--r--  2.0 unx       77 b- defN 23-Nov-10 22:43 monzo_utils/model/pot.py
 -rw-r--r--  2.0 unx      629 b- defN 23-Nov-10 22:43 monzo_utils/model/provider.py
 -rw-r--r--  2.0 unx      564 b- defN 24-Jan-25 21:32 monzo_utils/model/refund.py
 -rw-r--r--  2.0 unx       87 b- defN 23-Nov-11 18:09 monzo_utils/model/standing_order.py
 -rw-r--r--  2.0 unx      393 b- defN 23-Nov-12 20:42 monzo_utils/model/transaction.py
 -rw-r--r--  2.0 unx       94 b- defN 23-Nov-10 22:43 monzo_utils/model/transaction_metadata.py
--rwxr-xr-x  2.0 unx      897 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.data/scripts/monzo-payments
--rwxr-xr-x  2.0 unx    12970 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.data/scripts/monzo-search
--rwxr-xr-x  2.0 unx     3241 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.data/scripts/monzo-status
--rwxr-xr-x  2.0 unx      522 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.data/scripts/monzo-sync
--rw-r--r--  2.0 unx     1078 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.dist-info/LICENSE
--rw-r--r--  2.0 unx      479 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.dist-info/WHEEL
--rw-r--r--  2.0 unx       61 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     3492 b- defN 24-Apr-25 17:47 monzo_utils-0.0.92.dist-info/RECORD
-40 files, 131747 bytes uncompressed, 32246 bytes compressed:  75.5%
+-rwxr-xr-x  2.0 unx      897 b- defN 24-May-09 18:44 monzo_utils-0.0.93.data/scripts/monzo-payments
+-rwxr-xr-x  2.0 unx    12970 b- defN 24-May-09 18:44 monzo_utils-0.0.93.data/scripts/monzo-search
+-rwxr-xr-x  2.0 unx     3241 b- defN 24-May-09 18:44 monzo_utils-0.0.93.data/scripts/monzo-status
+-rwxr-xr-x  2.0 unx      522 b- defN 24-May-09 18:44 monzo_utils-0.0.93.data/scripts/monzo-sync
+-rw-r--r--  2.0 unx     1078 b- defN 24-May-09 18:44 monzo_utils-0.0.93.dist-info/LICENSE
+-rw-r--r--  2.0 unx      431 b- defN 24-May-09 18:44 monzo_utils-0.0.93.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-09 18:44 monzo_utils-0.0.93.dist-info/WHEEL
+-rw-r--r--  2.0 unx       61 b- defN 24-May-09 18:44 monzo_utils-0.0.93.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3492 b- defN 24-May-09 18:44 monzo_utils-0.0.93.dist-info/RECORD
+40 files, 133399 bytes uncompressed, 32427 bytes compressed:  75.7%
```

## zipnote {}

```diff
@@ -87,35 +87,35 @@
 
 Filename: monzo_utils/model/transaction.py
 Comment: 
 
 Filename: monzo_utils/model/transaction_metadata.py
 Comment: 
 
-Filename: monzo_utils-0.0.92.data/scripts/monzo-payments
+Filename: monzo_utils-0.0.93.data/scripts/monzo-payments
 Comment: 
 
-Filename: monzo_utils-0.0.92.data/scripts/monzo-search
+Filename: monzo_utils-0.0.93.data/scripts/monzo-search
 Comment: 
 
-Filename: monzo_utils-0.0.92.data/scripts/monzo-status
+Filename: monzo_utils-0.0.93.data/scripts/monzo-status
 Comment: 
 
-Filename: monzo_utils-0.0.92.data/scripts/monzo-sync
+Filename: monzo_utils-0.0.93.data/scripts/monzo-sync
 Comment: 
 
-Filename: monzo_utils-0.0.92.dist-info/LICENSE
+Filename: monzo_utils-0.0.93.dist-info/LICENSE
 Comment: 
 
-Filename: monzo_utils-0.0.92.dist-info/METADATA
+Filename: monzo_utils-0.0.93.dist-info/METADATA
 Comment: 
 
-Filename: monzo_utils-0.0.92.dist-info/WHEEL
+Filename: monzo_utils-0.0.93.dist-info/WHEEL
 Comment: 
 
-Filename: monzo_utils-0.0.92.dist-info/top_level.txt
+Filename: monzo_utils-0.0.93.dist-info/top_level.txt
 Comment: 
 
-Filename: monzo_utils-0.0.92.dist-info/RECORD
+Filename: monzo_utils-0.0.93.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## monzo_utils/lib/monzo_payments.py

```diff
@@ -52,15 +52,17 @@
 
         if not self.account:
             sys.stderr.write(f"account {self.account_name} not found in the database\n")
             sys.exit(1)
 
         homedir = pwd.getpwuid(os.getuid()).pw_dir
         self.credit_tracker = f"{homedir}/.monzo/{self.config['account']}.credit"
+        self.credit_notify_tracker = f"{homedir}/.monzo/{self.config['account']}.credit_notify"
         self.shortfall_tracker = f"{homedir}/.monzo/{self.config['account']}.shortfall"
+        self.shortfall_notify_tracker = f"{homedir}/.monzo/{self.config['account']}.shortfall_notify"
 
 
     def get_db(self):
         try:
             db = DB(None, self.config_path)
         except Exception as e:
             print(f"failed to connect to the database: {str(e)}")
@@ -527,26 +529,73 @@
                             pot.balance
                         )
                     )
 
                 return True
 
         elif notify:
-            self.notify(
-                '%s - shortfall' % (self.account.name),
-                "£%.2f\n£%.2f due, £%.2f available" % (
-                    shortfall,
-                    self.due / 100,
-                    pot.balance
+            if not self.shortfall_notified(self.account.name, shortfall):
+                self.notify(
+                    '%s - shortfall' % (self.account.name),
+                    "£%.2f\n£%.2f due, £%.2f available" % (
+                        shortfall,
+                        self.due / 100,
+                        pot.balance
+                    )
                 )
-            )
+
+                self.set_shortfall_notified(self.account.name, shortfall)
+
+        return False
+
+
+    def shortfall_notified(self, account_name, shortfall):
+        today = datetime.datetime.now().strftime('%Y%m%d')
+
+        if os.path.exists(self.shortfall_notify_tracker):
+            data = json.loads(open(self.shortfall_notify_tracker).read())
+
+            if data['date'] == today and data['amount'] == shortfall:
+                return True
 
         return False
 
 
+    def set_shortfall_notified(self, account_name, shortfall):
+        today = datetime.datetime.now().strftime('%Y%m%d')
+
+        with open(self.shortfall_notify_tracker,'w') as f:
+            f.write(json.dumps({
+                'date': today,
+                'amount': shortfall
+            }))
+
+
+    def credit_notified(self, account_name, credit):
+        today = datetime.datetime.now().strftime('%Y%m%d')
+
+        if os.path.exists(self.credit_notify_tracker):
+            data = json.loads(open(self.credit_notify_tracker).read())
+
+            if data['date'] == today and data['amount'] == credit:
+                return True
+
+        return False
+
+
+    def set_credit_notified(self, account_name, credit):
+        today = datetime.datetime.now().strftime('%Y%m%d')
+
+        with open(self.credit_notify_tracker,'w') as f:
+            f.write(json.dumps({
+                'date': today,
+                'amount': credit
+            }))
+
+
     def handle_credit(self, pot, credit):
         withdraw = False
         notify = False
 
         if 'pot' in self.config and 'auto_withdraw' in self.config and self.config['auto_withdraw'] and not sys.stdout.isatty() and not self.abbreviate:
             if 'auto_withdraw_delay_mins' in self.config:
                 withdraw = self.handle_withdrawal_delay(credit)
```

## Comparing `monzo_utils-0.0.92.data/scripts/monzo-payments` & `monzo_utils-0.0.93.data/scripts/monzo-payments`

 * *Files identical despite different names*

## Comparing `monzo_utils-0.0.92.data/scripts/monzo-search` & `monzo_utils-0.0.93.data/scripts/monzo-search`

 * *Files identical despite different names*

## Comparing `monzo_utils-0.0.92.data/scripts/monzo-status` & `monzo_utils-0.0.93.data/scripts/monzo-status`

 * *Files identical despite different names*

## Comparing `monzo_utils-0.0.92.data/scripts/monzo-sync` & `monzo_utils-0.0.93.data/scripts/monzo-sync`

 * *Files identical despite different names*

## Comparing `monzo_utils-0.0.92.dist-info/LICENSE` & `monzo_utils-0.0.93.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `monzo_utils-0.0.92.dist-info/RECORD` & `monzo_utils-0.0.93.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 monzo_utils/lib/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 monzo_utils/lib/config.py,sha256=Z3dvghLfP770d4BXAqJLRsG4CoOSaTMXvnxspWxI--w,1419
 monzo_utils/lib/db.py,sha256=ukcMHbJNiD-wt9wgTEjL6eHJ4IjnPe5PMFJXEQioJB0,7941
 monzo_utils/lib/log.py,sha256=B_OuzpXbkjEoDniL-bR_pOBko0mzbp0s0Lr-Cz7-wv4,1870
 monzo_utils/lib/monzo_api.py,sha256=cpHH10b_OyKFl-6jRsn23lvDlPykunTJFUK9DWkM_5E,9373
-monzo_utils/lib/monzo_payments.py,sha256=Dc60XhxftkhglgvAym_s4VoqH5Ta3F2WWu5qltdsVSM,27325
+monzo_utils/lib/monzo_payments.py,sha256=kKzSZWjKFkqvvPFsOxiekrWQ2yacZTOLHWNOCM2A3QI,29025
 monzo_utils/lib/monzo_sync.py,sha256=2mlsj7KcoM33GoAdRiPY4xEp7BdLppbYZJGFwai01RM,19466
 monzo_utils/lib/singleton.py,sha256=d5M-H37o2cqgSBDg-RulXS3pvbVZ4I8SPIAXHPXWAog,238
 monzo_utils/lib/transactions_seen.py,sha256=4encbslk2jQ6fTML5ZGG1gjsZcLa2axrOAk7DWmabOo,108
 monzo_utils/lib/db_driver/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 monzo_utils/lib/db_driver/mysql.py,sha256=MAt-70pZ1bUNlOHIDmdp9M_jtRwr2UPIYGyunaFgK-4,1579
 monzo_utils/lib/db_driver/sqlite.py,sha256=nLkUzfWdsB50xGtgUn8nFGOFc3NRvt5IJ-g6HIvHYl0,1259
 monzo_utils/model/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
@@ -25,16 +25,16 @@
 monzo_utils/model/payment.py,sha256=1D-A6A7REAnBfXb8HBz5l4a-I_v7Fo-C34bmi9i7X88,16506
 monzo_utils/model/pot.py,sha256=WhEcFLU5qgUM2s1HHwmyhxCF2bRcHmYVrPBPLv1OZh0,77
 monzo_utils/model/provider.py,sha256=gkAIDnTUzt5ALHUDFlsujsjoXD97Yv2OuKei0trXft8,629
 monzo_utils/model/refund.py,sha256=UDKA53xNZAnBHN2Ai7m_bbz9MeURH2oTNvNo287CmXc,564
 monzo_utils/model/standing_order.py,sha256=2zi-BPPSHJc4zDTIcg_QmijlA32VXAmqz6RlJBFn00A,87
 monzo_utils/model/transaction.py,sha256=5KCNab4drcvqaT1O1Ib0c04iWyfJyU-cIC5134BLi1c,393
 monzo_utils/model/transaction_metadata.py,sha256=hKrkAcqXU3sVtFyHKobccXBZZeC4SzfyS2M-GO1gpng,94
-monzo_utils-0.0.92.data/scripts/monzo-payments,sha256=ZSZC8toG8r2ubsMVv8S6SSoVnD6jb-vagbIg8S7BWr8,897
-monzo_utils-0.0.92.data/scripts/monzo-search,sha256=UqPq8dGidlaiD3OVcCb4DfKz_VdxEmMyyHObcbLFh0g,12970
-monzo_utils-0.0.92.data/scripts/monzo-status,sha256=pFcZ9hO3XEt0wF3t5QRvYUIwWGNgjLQwsCMXn9su6po,3241
-monzo_utils-0.0.92.data/scripts/monzo-sync,sha256=Yw0jvMOy14Ise1a0mCtoRoxNTXaQXQuUMmfPWp71EXA,522
-monzo_utils-0.0.92.dist-info/LICENSE,sha256=A9Q6E-hg-RC_H80yiY1f7ct2EgHiUWT0sxTMLsLgLw0,1078
-monzo_utils-0.0.92.dist-info/METADATA,sha256=E-aqoszciyi2m80cqEZ7RfpJLKMvQIqMYIY-578rpk8,479
-monzo_utils-0.0.92.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-monzo_utils-0.0.92.dist-info/top_level.txt,sha256=lga6TdLpY3iEYbaxzzO1YSMDaEeYf6I6YiIrEmicgyQ,61
-monzo_utils-0.0.92.dist-info/RECORD,,
+monzo_utils-0.0.93.data/scripts/monzo-payments,sha256=ZSZC8toG8r2ubsMVv8S6SSoVnD6jb-vagbIg8S7BWr8,897
+monzo_utils-0.0.93.data/scripts/monzo-search,sha256=UqPq8dGidlaiD3OVcCb4DfKz_VdxEmMyyHObcbLFh0g,12970
+monzo_utils-0.0.93.data/scripts/monzo-status,sha256=pFcZ9hO3XEt0wF3t5QRvYUIwWGNgjLQwsCMXn9su6po,3241
+monzo_utils-0.0.93.data/scripts/monzo-sync,sha256=Yw0jvMOy14Ise1a0mCtoRoxNTXaQXQuUMmfPWp71EXA,522
+monzo_utils-0.0.93.dist-info/LICENSE,sha256=A9Q6E-hg-RC_H80yiY1f7ct2EgHiUWT0sxTMLsLgLw0,1078
+monzo_utils-0.0.93.dist-info/METADATA,sha256=hnSVF59z7hblouXh0IqRl-PWviR1plA1gGy-wkN9ewU,431
+monzo_utils-0.0.93.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+monzo_utils-0.0.93.dist-info/top_level.txt,sha256=lga6TdLpY3iEYbaxzzO1YSMDaEeYf6I6YiIrEmicgyQ,61
+monzo_utils-0.0.93.dist-info/RECORD,,
```

