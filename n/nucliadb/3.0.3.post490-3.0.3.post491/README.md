# Comparing `tmp/nucliadb-3.0.3.post490-py3-none-any.whl.zip` & `tmp/nucliadb-3.0.3.post491-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,8 +1,8 @@
-Zip file size: 750651 bytes, number of entries: 455
+Zip file size: 750667 bytes, number of entries: 455
 -rw-r--r--  2.0 unx     1135 b- defN 24-May-09 14:25 migrations/0001_bootstrap.py
 -rw-r--r--  2.0 unx     1177 b- defN 24-May-09 14:25 migrations/0002_rollover_shards.py
 -rw-r--r--  2.0 unx     2436 b- defN 24-May-09 14:25 migrations/0003_allfields_key.py
 -rw-r--r--  2.0 unx     1177 b- defN 24-May-09 14:25 migrations/0004_rollover_shards.py
 -rw-r--r--  2.0 unx     1177 b- defN 24-May-09 14:25 migrations/0005_rollover_shards.py
 -rw-r--r--  2.0 unx     1024 b- defN 24-May-09 14:25 migrations/0006_rollover_shards.py
 -rw-r--r--  2.0 unx     1301 b- defN 24-May-09 14:25 migrations/0008_cleanup_leftover_rollover_metadata.py
@@ -235,15 +235,15 @@
 -rw-r--r--  2.0 unx    31127 b- defN 24-May-09 14:25 nucliadb/search/search/query.py
 -rw-r--r--  2.0 unx     3018 b- defN 24-May-09 14:25 nucliadb/search/search/shards.py
 -rw-r--r--  2.0 unx     5101 b- defN 24-May-09 14:25 nucliadb/search/search/summarize.py
 -rw-r--r--  2.0 unx     2438 b- defN 24-May-09 14:25 nucliadb/search/search/utils.py
 -rw-r--r--  2.0 unx      835 b- defN 24-May-09 14:25 nucliadb/search/search/chat/__init__.py
 -rw-r--r--  2.0 unx     2058 b- defN 24-May-09 14:25 nucliadb/search/search/chat/images.py
 -rw-r--r--  2.0 unx    20793 b- defN 24-May-09 14:25 nucliadb/search/search/chat/prompt.py
--rw-r--r--  2.0 unx    15347 b- defN 24-May-09 14:25 nucliadb/search/search/chat/query.py
+-rw-r--r--  2.0 unx    15401 b- defN 24-May-09 14:25 nucliadb/search/search/chat/query.py
 -rw-r--r--  2.0 unx      835 b- defN 24-May-09 14:25 nucliadb/search/tests/__init__.py
 -rw-r--r--  2.0 unx     1295 b- defN 24-May-09 14:25 nucliadb/search/tests/conftest.py
 -rw-r--r--  2.0 unx     6578 b- defN 24-May-09 14:25 nucliadb/search/tests/fixtures.py
 -rw-r--r--  2.0 unx    15480 b- defN 24-May-09 14:25 nucliadb/search/tests/node.py
 -rw-r--r--  2.0 unx      833 b- defN 24-May-09 14:25 nucliadb/search/tests/unit/__init__.py
 -rw-r--r--  2.0 unx     2649 b- defN 24-May-09 14:25 nucliadb/search/tests/unit/test_app.py
 -rw-r--r--  2.0 unx     3374 b- defN 24-May-09 14:25 nucliadb/search/tests/unit/test_find_merge.py
@@ -444,14 +444,14 @@
 -rw-r--r--  2.0 unx     2186 b- defN 24-May-09 14:25 nucliadb/writer/tus/exceptions.py
 -rw-r--r--  2.0 unx    14527 b- defN 24-May-09 14:25 nucliadb/writer/tus/gcs.py
 -rw-r--r--  2.0 unx     5849 b- defN 24-May-09 14:25 nucliadb/writer/tus/local.py
 -rw-r--r--  2.0 unx     4367 b- defN 24-May-09 14:25 nucliadb/writer/tus/pg.py
 -rw-r--r--  2.0 unx     9069 b- defN 24-May-09 14:25 nucliadb/writer/tus/s3.py
 -rw-r--r--  2.0 unx     4734 b- defN 24-May-09 14:25 nucliadb/writer/tus/storage.py
 -rw-r--r--  2.0 unx     2556 b- defN 24-May-09 14:25 nucliadb/writer/tus/utils.py
--rw-r--r--  2.0 unx     4399 b- defN 24-May-09 14:26 nucliadb-3.0.3.post490.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-May-09 14:26 nucliadb-3.0.3.post490.dist-info/WHEEL
--rw-r--r--  2.0 unx     1268 b- defN 24-May-09 14:26 nucliadb-3.0.3.post490.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       20 b- defN 24-May-09 14:26 nucliadb-3.0.3.post490.dist-info/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 24-May-09 14:26 nucliadb-3.0.3.post490.dist-info/zip-safe
--rw-rw-r--  2.0 unx    42669 b- defN 24-May-09 14:26 nucliadb-3.0.3.post490.dist-info/RECORD
-455 files, 2217492 bytes uncompressed, 682419 bytes compressed:  69.2%
+-rw-r--r--  2.0 unx     4399 b- defN 24-May-09 14:27 nucliadb-3.0.3.post491.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-09 14:27 nucliadb-3.0.3.post491.dist-info/WHEEL
+-rw-r--r--  2.0 unx     1268 b- defN 24-May-09 14:27 nucliadb-3.0.3.post491.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       20 b- defN 24-May-09 14:27 nucliadb-3.0.3.post491.dist-info/top_level.txt
+-rw-r--r--  2.0 unx        1 b- defN 24-May-09 14:27 nucliadb-3.0.3.post491.dist-info/zip-safe
+-rw-rw-r--  2.0 unx    42669 b- defN 24-May-09 14:27 nucliadb-3.0.3.post491.dist-info/RECORD
+455 files, 2217546 bytes uncompressed, 682435 bytes compressed:  69.2%
```

## zipnote {}

```diff
@@ -1341,26 +1341,26 @@
 
 Filename: nucliadb/writer/tus/storage.py
 Comment: 
 
 Filename: nucliadb/writer/tus/utils.py
 Comment: 
 
-Filename: nucliadb-3.0.3.post490.dist-info/METADATA
+Filename: nucliadb-3.0.3.post491.dist-info/METADATA
 Comment: 
 
-Filename: nucliadb-3.0.3.post490.dist-info/WHEEL
+Filename: nucliadb-3.0.3.post491.dist-info/WHEEL
 Comment: 
 
-Filename: nucliadb-3.0.3.post490.dist-info/entry_points.txt
+Filename: nucliadb-3.0.3.post491.dist-info/entry_points.txt
 Comment: 
 
-Filename: nucliadb-3.0.3.post490.dist-info/top_level.txt
+Filename: nucliadb-3.0.3.post491.dist-info/top_level.txt
 Comment: 
 
-Filename: nucliadb-3.0.3.post490.dist-info/zip-safe
+Filename: nucliadb-3.0.3.post491.dist-info/zip-safe
 Comment: 
 
-Filename: nucliadb-3.0.3.post490.dist-info/RECORD
+Filename: nucliadb-3.0.3.post491.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## nucliadb/search/search/chat/query.py

```diff
@@ -317,14 +317,15 @@
         question=user_query,
         truncate=True,
         user_prompt=user_prompt,
         citations=chat_request.citations,
         generative_model=chat_request.generative_model,
         max_tokens=query_parser.get_max_tokens_answer(),
         query_context_images=prompt_context_images,
+        prefer_markdown=chat_request.prefer_markdown,
     )
     predict = get_predict()
     nuclia_learning_id, predict_generator = await predict.chat_query(kbid, chat_model)
 
     async def _wrapped_stream():
         # so we can audit after streamed out answer
         text_answer = b""
```

## Comparing `nucliadb-3.0.3.post490.dist-info/METADATA` & `nucliadb-3.0.3.post491.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: nucliadb
-Version: 3.0.3.post490
+Version: 3.0.3.post491
 Home-page: https://docs.nuclia.dev/docs/guides/nucliadb/intro
 Author: NucliaDB Community
 Author-email: nucliadb@nuclia.com
 License: BSD
 Project-URL: Nuclia, https://nuclia.com
 Project-URL: Github, https://github.com/nuclia/nucliadb
 Project-URL: Discord, https://discord.gg/8EvQwmsbzf
@@ -17,18 +17,18 @@
 Classifier: Programming Language :: Python
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3.11
 Classifier: Programming Language :: Python :: 3 :: Only
 Requires-Python: >=3.9, <4
 Description-Content-Type: text/markdown
-Requires-Dist: nucliadb-telemetry[all] >=3.0.3.post490
-Requires-Dist: nucliadb-utils[cache,fastapi,storages] >=3.0.3.post490
-Requires-Dist: nucliadb-protos >=3.0.3.post490
-Requires-Dist: nucliadb-models >=3.0.3.post490
+Requires-Dist: nucliadb-telemetry[all] >=3.0.3.post491
+Requires-Dist: nucliadb-utils[cache,fastapi,storages] >=3.0.3.post491
+Requires-Dist: nucliadb-protos >=3.0.3.post491
+Requires-Dist: nucliadb-models >=3.0.3.post491
 Requires-Dist: nucliadb-admin-assets >=1.0.0.post1224
 Requires-Dist: nucliadb-node-binding >=2.26.0
 Requires-Dist: uvicorn <0.19.0
 Requires-Dist: pydantic-argparse
 Requires-Dist: aiohttp >=3.9.4
 Requires-Dist: lru-dict >=1.1.7
 Requires-Dist: backoff
```

## Comparing `nucliadb-3.0.3.post490.dist-info/entry_points.txt` & `nucliadb-3.0.3.post491.dist-info/entry_points.txt`

 * *Files identical despite different names*

## Comparing `nucliadb-3.0.3.post490.dist-info/RECORD` & `nucliadb-3.0.3.post491.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -234,15 +234,15 @@
 nucliadb/search/search/query.py,sha256=cq6BFwnLdfAfrcGhJfW3DNlVvY1Vk7JGoO2TVFgJ8sU,31127
 nucliadb/search/search/shards.py,sha256=0p_BWLEVrK87htqhavZ2ixA2l253FPQnre3RpThtZco,3018
 nucliadb/search/search/summarize.py,sha256=bjncFFBv1R9g4OyhQSlGHFq5cJ8UvR8KrMgeKc-1AMU,5101
 nucliadb/search/search/utils.py,sha256=Gzjr9rFdwRfOgyDzX1Slz8DbcXLvavo0124S8II9omw,2438
 nucliadb/search/search/chat/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/search/search/chat/images.py,sha256=AjPgCJaCzu19ruUJcEVaG_bEUmqzB65EH0mduMbkzAE,2058
 nucliadb/search/search/chat/prompt.py,sha256=W98mZrhrscjkxVJ02OM7veAQ1fjMrNDSZ1CUSaECCCk,20793
-nucliadb/search/search/chat/query.py,sha256=4wV6nwzNVA4skiUVM0ggBgdRR7BjYHZ801b87WAuIgI,15347
+nucliadb/search/search/chat/query.py,sha256=6NKMtilwo6CUcjchf6u9Z8ieCaDTK8gD3MWAAQ_b9JE,15401
 nucliadb/search/tests/__init__.py,sha256=cp15ZcFnHvpcu_5-aK2A4uUyvuZVV_MJn4bIXMa20ks,835
 nucliadb/search/tests/conftest.py,sha256=BhVEPbrIm7GKDHtnS7tc7WqCRReIL4MzzTjLQUWrLJY,1295
 nucliadb/search/tests/fixtures.py,sha256=a0q-mh15uvr97ebGTStcdONWx4AQ8rdkH772azMwMMg,6578
 nucliadb/search/tests/node.py,sha256=QInxf97DUUi-afzBPZDboCH8D-E02A3R-XFwFpUrvCc,15480
 nucliadb/search/tests/unit/__init__.py,sha256=itSI7dtTwFP55YMX4iK7JzdMHS5CQVUiB1XzQu4UBh8,833
 nucliadb/search/tests/unit/test_app.py,sha256=3wr6_DTLdwhpk7Sske7EEqmGbaJSG4OH9Olw_KVszPw,2649
 nucliadb/search/tests/unit/test_find_merge.py,sha256=z_qLcXG8qdUegGkaEloG7wXXwoZyppeOnzUCcHAVq3w,3374
@@ -443,13 +443,13 @@
 nucliadb/writer/tus/exceptions.py,sha256=CmxYKnHXpXug25DYV4SpVAU47SGD-NVBd7pNTRbWHyk,2186
 nucliadb/writer/tus/gcs.py,sha256=WykJZicWKRYkVB5_Fkb_1cVLovAk86IVkEn1VgEDufc,14527
 nucliadb/writer/tus/local.py,sha256=lIOoGaylnsxPBYGskcmKSHv7MsvwIYFS4soDLey_KSs,5849
 nucliadb/writer/tus/pg.py,sha256=JUK_xKsyNcKAvWOch8gUMTc_e1evI_3aC6-Y5gMk2jw,4367
 nucliadb/writer/tus/s3.py,sha256=a9mfPtjBW3QaTYY2r6P7u_Y13V6mBefZjWgV4juZzgE,9069
 nucliadb/writer/tus/storage.py,sha256=8iBOjWIcY6PawQq_rmSiBKi0Gl6J6Q5ad6L-9nLCcJ4,4734
 nucliadb/writer/tus/utils.py,sha256=MSdVbRsRSZVdkaum69_0wku7X3p5wlZf4nr6E0GMKbw,2556
-nucliadb-3.0.3.post490.dist-info/METADATA,sha256=cuMsLrHUwfZf6axf69WEasMpg6MauASBokvXVuVLOwE,4399
-nucliadb-3.0.3.post490.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-nucliadb-3.0.3.post490.dist-info/entry_points.txt,sha256=XqGfgFDuY3zXQc8ewXM2TRVjTModIq851zOsgrmaXx4,1268
-nucliadb-3.0.3.post490.dist-info/top_level.txt,sha256=hwYhTVnX7jkQ9gJCkVrbqEG1M4lT2F_iPQND1fCzF80,20
-nucliadb-3.0.3.post490.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-nucliadb-3.0.3.post490.dist-info/RECORD,,
+nucliadb-3.0.3.post491.dist-info/METADATA,sha256=6FaYNP6nM9Rs0Wap_4uDlkOeRXBJwrw4B1mDhLQsmW8,4399
+nucliadb-3.0.3.post491.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+nucliadb-3.0.3.post491.dist-info/entry_points.txt,sha256=XqGfgFDuY3zXQc8ewXM2TRVjTModIq851zOsgrmaXx4,1268
+nucliadb-3.0.3.post491.dist-info/top_level.txt,sha256=hwYhTVnX7jkQ9gJCkVrbqEG1M4lT2F_iPQND1fCzF80,20
+nucliadb-3.0.3.post491.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+nucliadb-3.0.3.post491.dist-info/RECORD,,
```

